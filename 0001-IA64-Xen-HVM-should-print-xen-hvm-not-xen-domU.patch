From d87e9cbae34b22c89e6094263ae44567f5b5bd90 Mon Sep 17 00:00:00 2001
From: "Richard W.M. Jones" <rjones@redhat.com>
Date: Fri, 27 May 2011 12:28:28 +0100
Subject: [PATCH] IA64 Xen HVM should print 'xen-hvm' not 'xen-domU'.

This updates commit 3ea952163f0c28cd88f8473bb015df892c4247bf.
---
 tests/test-rhel5-xen-domU-hvm-ia64.sh |    2 +-
 virt-what.in                          |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/tests/test-rhel5-xen-domU-hvm-ia64.sh b/tests/test-rhel5-xen-domU-hvm-ia64.sh
index 3250652..5f29c1b 100755
--- a/tests/test-rhel5-xen-domU-hvm-ia64.sh
+++ b/tests/test-rhel5-xen-domU-hvm-ia64.sh
@@ -19,7 +19,7 @@ root=tests/rhel5-xen-domU-hvm-ia64
 
 output="$(./virt-what --test-root=$root 2>&1)"
 expected="xen
-xen-domU"
+xen-hvm"
 
 if [ "$output" != "$expected" ]; then
     echo "$0: test failed because output did not match expected"
diff --git a/virt-what.in b/virt-what.in
index 74ffab2..4f381ab 100644
--- a/virt-what.in
+++ b/virt-what.in
@@ -197,7 +197,7 @@ elif [ "$arch" = "ia64" ]; then
     if [ -d $root/sys/bus/xen -a ! -d $root/sys/bus/xen-backend ]; then
         # PV-on-HVM drivers installed in a Xen guest.
         echo xen
-        echo xen-domU
+        echo xen-hvm
     else
         # There is no virt leaf on IA64 HVM.  This is a last-ditch
         # attempt to detect something is virtualized by using a
-- 
1.7.5.2

